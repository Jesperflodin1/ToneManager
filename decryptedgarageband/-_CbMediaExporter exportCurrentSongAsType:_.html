<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>IDA - MobileGarageBand.i64 (MobileGarageBand) /Users/jesper/Documents/Projects/Tweaks/tonehelper/decryptedgarageband/MobileGarageBand.i64</title>
</head>
<body bgcolor="#ffffff">
<span style="white-space: pre; font-family: Courier; color: blue; background: #ffffff">

<span style="background:#f0ffee"><span style="color:navy">void __cdecl -[CbMediaExporter exportCurrentSongAsType:](CbMediaExporter *self, SEL a2, unsigned __int64 type)</span></span>
<span style="background:#f0ffee"><span style="color:navy">{                                                                            </span></span>
<span style="background:#f0ffee">  <span style="color:navy">CbMediaExporter *v3; // </span><span style="color:#8080ff">x19                                                </span></span>
<span style="background:#f0ffee">  <span style="color:navy">__int64 bitrate; // </span><span style="color:#8080ff">x21                                                    </span></span>
<span style="background:#f0ffee">  <span style="color:navy">id v5; // </span><span style="color:#8080ff">x0                                                               </span></span>
<span style="background:#f0ffee">  <span style="color:gray">void *CBSongCollectionManagerinstance</span><span style="color:navy">; </span><span style="color:gray">// </span><span style="color:#8080ff">x20                              </span></span>
<span style="background:#f0ffee">  <span style="color:navy">id v7; // </span><span style="color:#8080ff">x0                                                               </span></span>
<span style="background:#f0ffee">  <span style="color:navy">NSString *v8; // </span><span style="color:#8080ff">x0                                                        </span></span>
<span style="background:#f0ffee">  <span style="color:navy">__int64 v9; // </span><span style="color:#8080ff">x23                                                         </span></span>
<span style="background:#f0ffee">  <span style="color:navy">id v10; // </span><span style="color:#8080ff">x0                                                              </span></span>
<span style="background:#f0ffee">  <span style="color:gray">void *v11</span><span style="color:navy">; </span><span style="color:gray">// </span><span style="color:#8080ff">x0                                                           </span></span>
<span style="background:#f0ffee">  <span style="color:navy">NSURL *v12; // </span><span style="color:#8080ff">x22                                                         </span></span>
<span style="background:#f0ffee">  <span style="color:navy">NSString *v13; // </span><span style="color:#8080ff">x0                                                       </span></span>
<span style="background:#f0ffee">  <span style="color:navy">__int64 v14; // </span><span style="color:#8080ff">x21                                                        </span></span>
<span style="background:#f0ffee">                                                                             </span>
<span style="background:#f0ffee">  <span style="color:#8080ff">v3 </span><span style="color:navy">= </span><span style="color:#8080ff">self</span><span style="color:navy">;                                                                 </span></span>
<span style="background:#f0ffee">  <span style="color:#8080ff">self</span><span style="color:navy">-&gt;_exportCancelled = 0;                                                </span></span>
<span style="background:#f0ffee">  <span style="color:#8080ff">self</span><span style="color:navy">-&gt;_exportType = </span><span style="color:#8080ff">type</span><span style="color:navy">;                                                  </span></span>
<span style="background:#f0ffee">  <span style="color:navy">if ( </span><span style="color:#8080ff">type &gt; </span><span style="color:navy">6 )                                                            </span></span>
<span style="background:#f0ffee">  <span style="color:navy">{                                                                          </span></span>
<span style="background:#f0ffee">    <span style="color:navy">if ( </span><span style="color:#8080ff">type </span><span style="color:navy">- 7 &gt; 1 )                                                      </span></span>
<span style="background:#f0ffee">    <span style="color:navy">{                                                                        </span></span>
<span style="background:#f0ffee">      <span style="color:#8080ff">v8 </span><span style="color:navy">= ((</span><span style="color:gray">NSString *(__cdecl *)(CbMediaExporter *, SEL)</span><span style="color:navy">)</span>objc_msgSend<span style="color:navy">)(</span><span style="color:#8080ff">self</span><span style="color:navy">, &quot;</span><span style="color:green">destDirectory&quot;</span><span style="color:navy">);</span></span>
<span style="background:#f0ffee">      <span style="color:#8080ff">v9 </span><span style="color:navy">= </span>objc_retainAutoreleasedReturnValue<span style="color:navy">(</span><span style="color:#8080ff">v8</span><span style="color:navy">);                           </span></span>
<span style="background:#f0ffee">      objc_release<span style="color:navy">(</span><span style="color:#8080ff">v9</span><span style="color:navy">);                                                      </span></span>
<span style="background:#f0ffee">      <span style="color:#8080ff">v10 </span><span style="color:navy">= ((</span><span style="color:gray">id (__cdecl *)(CbSongCollectionManager_meta *, SEL)</span><span style="color:navy">)</span>objc_msgSend<span style="color:navy">)(</span></span>
<span style="background:#f0ffee">              <span style="color:navy">(</span><span style="color:gray">CbSongCollectionManager_meta *</span><span style="color:navy">)&amp;</span>OBJC_CLASS___CbSongCollectionManager<span style="color:navy">,</span></span>
<span style="background:#f0ffee">              &quot;<span style="color:green">instance&quot;</span><span style="color:navy">);                                                   </span></span>
<span style="background:#f0ffee">      <span style="color:#8080ff">v11 </span><span style="color:navy">= (</span><span style="color:gray">void *</span><span style="color:navy">)</span>objc_retainAutoreleasedReturnValue<span style="color:navy">(</span><span style="color:#8080ff">v10</span><span style="color:navy">);                 </span></span>
<span style="background:#f0ffee">      <span style="color:#8080ff">CBSongCollectionManagerinstance </span><span style="color:navy">= </span><span style="color:#8080ff">v11</span><span style="color:navy">;                                 </span></span>
<span style="background:#f0ffee">      <span style="color:#8080ff">v12 </span><span style="color:navy">= </span><span style="color:#8080ff">v3</span><span style="color:navy">-&gt;_sourcePathURL;                                              </span></span>
<span style="background:#f0ffee">      <span style="color:navy">if ( </span><span style="color:#8080ff">v9 </span><span style="color:navy">)                                                              </span></span>
<span style="background:#f0ffee">      <span style="color:navy">{                                                                      </span></span>
<span style="background:#f0ffee">        <span style="color:#8080ff">v13 </span><span style="color:navy">= ((</span><span style="color:gray">NSString *(__cdecl *)(CbMediaExporter *, SEL)</span><span style="color:navy">)</span>objc_msgSend<span style="color:navy">)(</span><span style="color:#8080ff">v3</span><span style="color:navy">, &quot;</span><span style="color:green">destDirectory&quot;</span><span style="color:navy">);</span></span>
<span style="background:#f0ffee">        <span style="color:#8080ff">v14 </span><span style="color:navy">= </span>objc_retainAutoreleasedReturnValue<span style="color:navy">(</span><span style="color:#8080ff">v13</span><span style="color:navy">);                       </span></span>
<span style="background:#f0ffee">        objc_msgSend<span style="color:navy">(</span><span style="color:#8080ff">CBSongCollectionManagerinstance</span><span style="color:navy">, &quot;</span><span style="color:green">exportSongWithPath:toDirectory:delegate:&quot;</span><span style="color:navy">, </span><span style="color:#8080ff">v12</span><span style="color:navy">, </span><span style="color:#8080ff">v14</span><span style="color:navy">, </span><span style="color:#8080ff">v3</span><span style="color:navy">);</span></span>
<span style="background:#f0ffee">        objc_release<span style="color:navy">(</span><span style="color:#8080ff">v14</span><span style="color:navy">);                                                   </span></span>
<span style="background:#f0ffee">      </span><span style="background:navy"></span><span style="background:#f0ffee"><span style="color:navy">}                                                                      </span></span>
<span style="background:#f0ffee">      <span style="color:navy">else                                                                   </span></span>
<span style="background:#f0ffee">      <span style="color:navy">{                                                                      </span></span>
<span style="background:#f0ffee">        objc_msgSend<span style="color:navy">(</span><span style="color:#8080ff">v11</span><span style="color:navy">, &quot;</span><span style="color:green">exportSongWithPath:delegate:&quot;</span><span style="color:navy">, </span><span style="color:#8080ff">v3</span><span style="color:navy">-&gt;_sourcePathURL, </span><span style="color:#8080ff">v3</span><span style="color:navy">);</span></span>
<span style="background:#f0ffee">      </span><span style="background:navy"></span><span style="background:#f0ffee"><span style="color:navy">}                                                                      </span></span>
<span style="background:#f0ffee">    </span><span style="background:blue"></span><span style="background:#f0ffee"><span style="color:navy">}                                                                        </span></span>
<span style="background:#f0ffee">    <span style="color:navy">else                                                                     </span></span>
<span style="background:#f0ffee">    <span style="color:navy">{                                                                        </span></span>
<span style="background:#f0ffee">      <span style="color:#8080ff">v7 </span><span style="color:navy">= ((</span><span style="color:gray">id (__cdecl *)(CbSongCollectionManager_meta *, SEL)</span><span style="color:navy">)</span>objc_msgSend<span style="color:navy">)(</span></span>
<span style="background:#f0ffee">             <span style="color:navy">(</span><span style="color:gray">CbSongCollectionManager_meta *</span><span style="color:navy">)&amp;</span>OBJC_CLASS___CbSongCollectionManager<span style="color:navy">,</span></span>
<span style="background:#f0ffee">             &quot;<span style="color:green">instance&quot;</span><span style="color:navy">);                                                    </span></span>
<span style="background:#f0ffee">      <span style="color:#8080ff">CBSongCollectionManagerinstance </span><span style="color:navy">= (</span><span style="color:gray">void *</span><span style="color:navy">)</span>objc_retainAutoreleasedReturnValue<span style="color:navy">(</span><span style="color:#8080ff">v7</span><span style="color:navy">);</span></span>
<span style="background:#f0ffee">      objc_msgSend<span style="color:navy">(                                                          </span></span>
<span style="background:#f0ffee">        <span style="color:#8080ff">CBSongCollectionManagerinstance</span><span style="color:navy">,                                     </span></span>
<span style="background:#f0ffee">        &quot;<span style="color:green">exportAudioSongAtPath:toDirectory:bitRate:convertToVideo:aacSilenceFramesAtStart:delegate:&quot;</span><span style="color:navy">,</span></span>
<span style="background:#f0ffee">        <span style="color:#8080ff">v3</span><span style="color:navy">-&gt;_sourcePathURL,                                                  </span></span>
<span style="background:#f0ffee">        <span style="color:navy">0LL,                                                                 </span></span>
<span style="background:#f0ffee">        <span style="color:navy">192LL,                                                               </span></span>
<span style="background:#f0ffee">        <span style="color:navy">1LL,                                                                 </span></span>
<span style="background:#f0ffee">        <span style="color:navy">22050LL,                                                             </span></span>
<span style="background:#f0ffee">        <span style="color:#8080ff">v3</span><span style="color:navy">);                                                                 </span></span>
<span style="background:#f0ffee">    </span><span style="background:navy"></span><span style="background:#f0ffee"><span style="color:navy">}                                                                        </span></span>
<span style="background:#f0ffee">  </span><span style="background:blue"></span><span style="background:#f0ffee"><span style="color:navy">}                                                                          </span></span>
<span style="background:#f0ffee">  <span style="color:navy">else                                          </span><span style="color:green">// FOR RINGTONES             </span></span>
<span style="background:#f0ffee">  <span style="color:navy">{                                                                          </span></span>
<span style="background:#f0ffee">    <span style="color:#8080ff">bitrate </span><span style="color:navy">= </span>qword_101D13FD0<span style="color:navy">[</span><span style="color:#8080ff">type</span><span style="color:navy">];                                         </span></span>
<span style="background:#f0ffee">    <span style="color:#8080ff">v5 </span><span style="color:navy">= ((</span><span style="color:gray">id (__cdecl *)(CbSongCollectionManager_meta *, SEL)</span><span style="color:navy">)</span>objc_msgSend<span style="color:navy">)(</span></span>
<span style="background:#f0ffee">           <span style="color:navy">(</span><span style="color:gray">CbSongCollectionManager_meta *</span><span style="color:navy">)&amp;</span>OBJC_CLASS___CbSongCollectionManager<span style="color:navy">,</span></span>
<span style="background:#f0ffee">           &quot;<span style="color:green">instance&quot;</span><span style="color:navy">);                                                      </span></span>
<span style="background:#f0ffee">    <span style="color:#8080ff">CBSongCollectionManagerinstance </span><span style="color:navy">= (</span><span style="color:gray">void *</span><span style="color:navy">)</span>objc_retainAutoreleasedReturnValue<span style="color:navy">(</span><span style="color:#8080ff">v5</span><span style="color:navy">);</span></span>
<span style="background:#f0ffee">    objc_msgSend<span style="color:navy">(                                                            </span></span>
<span style="background:#f0ffee">      <span style="color:#8080ff">CBSongCollectionManagerinstance</span><span style="color:navy">,                                       </span></span>
<span style="background:#f0ffee">      &quot;<span style="color:green">exportAudioSongAtPath:toDirectory:bitRate:convertToVideo:aacSilenceFramesAtStart:maxLength:metaDataName:delegate:&quot;</span><span style="color:navy">,</span></span>
<span style="background:#f0ffee">      <span style="color:#8080ff">v3</span><span style="color:navy">-&gt;_sourcePathURL,                                                    </span></span>
<span style="background:#f0ffee">      <span style="color:#8080ff">v3</span><span style="color:navy">-&gt;_destDirectory,                                                    </span></span>
<span style="background:#f0ffee">      <span style="color:#8080ff">bitrate</span><span style="color:navy">,                                                               </span></span>
<span style="background:#f0ffee">      <span style="color:navy">0LL,                                                                   </span></span>
<span style="background:#f0ffee">      <span style="color:navy">882LL,                                                                 </span></span>
<span style="background:#f0ffee">      <span style="color:#8080ff">v3</span><span style="color:navy">-&gt;_songName,                                                         </span></span>
<span style="background:#f0ffee">      <span style="color:#8080ff">v3</span><span style="color:navy">-&gt;_maxExportLength,                                                  </span></span>
<span style="background:#f0ffee">      <span style="color:#8080ff">v3</span><span style="color:navy">);                                                                   </span></span>
<span style="background:#f0ffee">  </span><span style="background:navy"></span><span style="background:#f0ffee"><span style="color:navy">}                                                                          </span></span>
<span style="background:#f0ffee">  objc_release<span style="color:navy">(</span><span style="color:#8080ff">CBSongCollectionManagerinstance</span><span style="color:navy">);                             </span></span>
<span style="background:#f0ffee"></span><span style="background:navy"></span><span style="background:#f0ffee"><span style="color:navy">}                                                                            </span></span>
</span></body></html>

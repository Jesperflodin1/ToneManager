<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>IDA - MobileGarageBand.i64 (MobileGarageBand) /Users/jesper/Documents/Projects/Tweaks/tonehelper/decryptedgarageband/MobileGarageBand.i64</title>
</head>
<body bgcolor="#ffffff">
<span style="white-space: pre; font-family: Courier; color: blue; background: #ffffff">

<span style="background:#f0ffee"><span style="color:gray">__int64 __fastcall sub_100617710(__int64 a1)                                                         </span></span>
<span style="background:#f0ffee"><span style="color:navy">{                                                                                                    </span></span>
<span style="background:#f0ffee">  <span style="color:navy">__int64 v1; // </span><span style="color:#8080ff">x19                                                                                 </span></span>
<span style="background:#f0ffee">  <span style="color:gray">void *localFileManager</span><span style="color:navy">; </span><span style="color:gray">// </span><span style="color:#8080ff">x20                                                                     </span></span>
<span style="background:#f0ffee">  <span style="color:gray">void *v3</span><span style="color:navy">; </span><span style="color:gray">// </span><span style="color:#8080ff">x0                                                                                    </span></span>
<span style="background:#f0ffee">  <span style="color:gray">void *NSMutableDict_withCap5</span><span style="color:navy">; </span><span style="color:gray">// </span><span style="color:#8080ff">x21                                                               </span></span>
<span style="background:#f0ffee">  <span style="color:gray">void *v5</span><span style="color:navy">; </span><span style="color:gray">// </span><span style="color:#8080ff">x0                                                                                    </span></span>
<span style="background:#f0ffee">  <span style="color:gray">void *v6</span><span style="color:navy">; </span><span style="color:gray">// </span><span style="color:#8080ff">x0                                                                                    </span></span>
<span style="background:#f0ffee">  <span style="color:gray">void *localtones.plist</span><span style="color:navy">; </span><span style="color:gray">// </span><span style="color:#8080ff">x22                                                                     </span></span>
<span style="background:#f0ffee">  <span style="color:gray">void *v8</span><span style="color:navy">; </span><span style="color:gray">// </span><span style="color:#8080ff">x0                                                                                    </span></span>
<span style="background:#f0ffee">  <span style="color:gray">void *v9</span><span style="color:navy">; </span><span style="color:gray">// </span><span style="color:#8080ff">x0                                                                                    </span></span>
<span style="background:#f0ffee">  <span style="color:navy">__int64 localtones.plist_path; // </span><span style="color:#8080ff">x23                                                              </span></span>
<span style="background:#f0ffee">  <span style="color:gray">__int64 result</span><span style="color:navy">; </span><span style="color:gray">// </span><span style="color:#8080ff">x0                                                                              </span></span>
<span style="background:#f0ffee">  <span style="color:gray">void *v12</span><span style="color:navy">; </span><span style="color:gray">// </span><span style="color:#8080ff">x0                                                                                   </span></span>
<span style="background:#f0ffee">  <span style="color:gray">void *v13</span><span style="color:navy">; </span><span style="color:gray">// </span><span style="color:#8080ff">x0                                                                                   </span></span>
<span style="background:#f0ffee">  <span style="color:gray">void *v14</span><span style="color:navy">; </span><span style="color:gray">// </span><span style="color:#8080ff">x23                                                                                  </span></span>
<span style="background:#f0ffee">  <span style="color:gray">void *v15</span><span style="color:navy">; </span><span style="color:gray">// </span><span style="color:#8080ff">x0                                                                                   </span></span>
<span style="background:#f0ffee">  <span style="color:navy">__int64 v16; // </span><span style="color:#8080ff">x20                                                                                </span></span>
<span style="background:#f0ffee">  <span style="color:gray">void *v17</span><span style="color:navy">; </span><span style="color:gray">// </span><span style="color:#8080ff">x0                                                                                   </span></span>
<span style="background:#f0ffee">  <span style="color:gray">void *v18</span><span style="color:navy">; </span><span style="color:gray">// </span><span style="color:#8080ff">x0                                                                                   </span></span>
<span style="background:#f0ffee">  <span style="color:gray">void *v19</span><span style="color:navy">; </span><span style="color:gray">// </span><span style="color:#8080ff">x23                                                                                  </span></span>
<span style="background:#f0ffee">  <span style="color:gray">void *v20</span><span style="color:navy">; </span><span style="color:gray">// </span><span style="color:#8080ff">x0                                                                                   </span></span>
<span style="background:#f0ffee">  <span style="color:navy">__int64 v21; // </span><span style="color:#8080ff">x21                                                                                </span></span>
<span style="background:#f0ffee">  <span style="color:navy">CbAlert *v22; // </span><span style="color:#8080ff">x0                                                                                </span></span>
<span style="background:#f0ffee">  <span style="color:navy">CbAlert *v23; // </span><span style="color:#8080ff">x22                                                                               </span></span>
<span style="background:#f0ffee">  <span style="color:navy">__int64 v24; // </span><span style="color:#8080ff">x2                                                                                 </span></span>
<span style="background:#f0ffee">  <span style="color:gray">__int64 v25</span><span style="color:navy">; </span><span style="color:gray">// </span><span style="color:#8080ff">[xsp+0h] [xbp-50h]                                                                 </span></span>
<span style="background:#f0ffee">  <span style="color:navy">__objc2_class *v26; // </span><span style="color:#8080ff">[xsp+8h] [xbp-48h]                                                          </span></span>
<span style="background:#f0ffee">                                                                                                     </span>
<span style="background:#f0ffee">  <span style="color:#8080ff">v1 </span><span style="color:navy">= </span><span style="color:#8080ff">a1</span><span style="color:navy">;                                                                                           </span></span>
<span style="background:#f0ffee">  <span style="color:navy">if ( *(</span><span style="color:gray">_BYTE *</span><span style="color:navy">)(</span><span style="color:#8080ff">a1 </span><span style="color:navy">+ 56) )                                                                         </span></span>
<span style="background:#f0ffee">  <span style="color:navy">{                                                                                                  </span></span>
<span style="background:#f0ffee">    <span style="color:#8080ff">localFileManager </span><span style="color:navy">= </span>objc_msgSend<span style="color:navy">(&amp;</span><span style="color:#ff00ff">OBJC_CLASS___NSFileManager</span><span style="color:navy">, &quot;</span><span style="color:green">new&quot;</span><span style="color:navy">);                             </span></span>
<span style="background:#f0ffee">    <span style="color:#8080ff">v3 </span><span style="color:navy">= </span>objc_msgSend<span style="color:navy">(&amp;</span><span style="color:#ff00ff">OBJC_CLASS___NSMutableDictionary</span><span style="color:navy">, &quot;</span><span style="color:green">dictionaryWithCapacity:&quot;</span><span style="color:navy">, 5LL);            </span></span>
<span style="background:#f0ffee">    <span style="color:#8080ff">NSMutableDict_withCap5 </span><span style="color:navy">= (</span><span style="color:gray">void *</span><span style="color:navy">)</span>objc_retainAutoreleasedReturnValue<span style="color:navy">(</span><span style="color:#8080ff">v3</span><span style="color:navy">);                         </span></span>
<span style="background:#f0ffee">    objc_msgSend<span style="color:navy">(</span><span style="color:#8080ff">NSMutableDict_withCap5</span><span style="color:navy">, &quot;</span><span style="color:green">setObject:forKey:&quot;</span><span style="color:navy">, *(</span><span style="color:gray">_QWORD *</span><span style="color:navy">)(</span><span style="color:#8080ff">v1 </span><span style="color:navy">+ 32), CFSTR(&quot;</span><span style="color:green">Identifier&quot;</span><span style="color:navy">));</span></span>
<span style="background:#f0ffee">    objc_msgSend<span style="color:navy">(</span><span style="color:#8080ff">NSMutableDict_withCap5</span><span style="color:navy">, &quot;</span><span style="color:green">setObject:forKey:&quot;</span><span style="color:navy">, *(</span><span style="color:gray">_QWORD *</span><span style="color:navy">)(*(</span><span style="color:gray">_QWORD *</span><span style="color:navy">)(</span><span style="color:#8080ff">v1 </span><span style="color:navy">+ 40) + 88LL), CFSTR(&quot;</span><span style="color:green">Name&quot;</span><span style="color:navy">));</span></span>
<span style="background:#f0ffee">    <span style="color:#8080ff">v5 </span><span style="color:navy">= </span>objc_msgSend<span style="color:navy">(*(</span><span style="color:gray">void **</span><span style="color:navy">)(</span><span style="color:#8080ff">v1 </span><span style="color:navy">+ 40), &quot;</span><span style="color:green">class&quot;</span><span style="color:navy">);                                                 </span></span>
<span style="background:#f0ffee">    <span style="color:#8080ff">v6 </span><span style="color:navy">= </span>objc_msgSend<span style="color:navy">(</span><span style="color:#8080ff">v5</span><span style="color:navy">, &quot;</span><span style="color:green">localRingtoneInfo&quot;</span><span style="color:navy">);                                                      </span></span>
<span style="background:#f0ffee">    <span style="color:#8080ff">localtones.plist </span><span style="color:navy">= (</span><span style="color:gray">void *</span><span style="color:navy">)</span>objc_retainAutoreleasedReturnValue<span style="color:navy">(</span><span style="color:#8080ff">v6</span><span style="color:navy">);                               </span></span>
<span style="background:#f0ffee">    objc_msgSend<span style="color:navy">(                                                                                    </span></span>
<span style="background:#f0ffee">      <span style="color:#8080ff">localtones.plist</span><span style="color:navy">,                                                                              </span></span>
<span style="background:#f0ffee">      &quot;<span style="color:green">setObject:forKey:&quot;</span><span style="color:navy">,                                                                           </span></span>
<span style="background:#f0ffee">      <span style="color:#8080ff">NSMutableDict_withCap5</span><span style="color:navy">,                                                                        </span></span>
<span style="background:#f0ffee">      <span style="color:navy">*(</span><span style="color:gray">_QWORD *</span><span style="color:navy">)(*(</span><span style="color:gray">_QWORD *</span><span style="color:navy">)(</span><span style="color:#8080ff">v1 </span><span style="color:navy">+ 40) + 88LL));</span><span style="color:green">// (v1 + 40) + 88LL) = CbExportRingtone.name         </span></span>
<span style="background:#f0ffee">    <span style="color:#8080ff">v8 </span><span style="color:navy">= </span>objc_msgSend<span style="color:navy">(*(</span><span style="color:gray">void **</span><span style="color:navy">)(</span><span style="color:#8080ff">v1 </span><span style="color:navy">+ 40), &quot;</span><span style="color:green">class&quot;</span><span style="color:navy">);</span><span style="color:green">// v1+40 = CbExportRingtone                      </span></span>
<span style="background:#f0ffee">    <span style="color:#8080ff">v9 </span><span style="color:navy">= </span>objc_msgSend<span style="color:navy">(</span><span style="color:#8080ff">v8</span><span style="color:navy">, &quot;</span><span style="color:green">localRingtonesInfoPath&quot;</span><span style="color:navy">);                                                 </span></span>
<span style="background:#f0ffee">    <span style="color:#8080ff">localtones.plist_path </span><span style="color:navy">= </span>objc_retainAutoreleasedReturnValue<span style="color:navy">(</span><span style="color:#8080ff">v9</span><span style="color:navy">);                                  </span></span>
<span style="background:#f0ffee">    objc_msgSend<span style="color:navy">(</span><span style="color:#8080ff">localFileManager</span><span style="color:navy">, &quot;</span><span style="color:green">removeItemAtPath:error:&quot;</span><span style="color:navy">, </span><span style="color:#8080ff">localtones.plist_path</span><span style="color:navy">, 0LL);           </span></span>
<span style="background:#f0ffee">    objc_msgSend<span style="color:navy">(</span><span style="color:#8080ff">localtones.plist</span><span style="color:navy">, &quot;</span><span style="color:green">writeToFile:atomically:&quot;</span><span style="color:navy">, </span><span style="color:#8080ff">localtones.plist_path</span><span style="color:navy">, 1LL);           </span></span>
<span style="background:#f0ffee">    objc_msgSend<span style="color:navy">(*(</span><span style="color:gray">void **</span><span style="color:navy">)(</span><span style="color:#8080ff">v1 </span><span style="color:navy">+ 40), &quot;</span><span style="color:green">showExportFinishedAlert&quot;</span><span style="color:navy">);                                    </span></span>
<span style="background:#f0ffee">    objc_release<span style="color:navy">(</span><span style="color:#8080ff">localtones.plist_path</span><span style="color:navy">);                                                             </span></span>
<span style="background:#f0ffee">    objc_release<span style="color:navy">(</span><span style="color:#8080ff">localtones.plist</span><span style="color:navy">);                                                                  </span></span>
<span style="background:#f0ffee">    objc_release<span style="color:navy">(</span><span style="color:#8080ff">NSMutableDict_withCap5</span><span style="color:navy">);                                                            </span></span>
<span style="background:#f0ffee">    <span style="color:#8080ff">result </span><span style="color:navy">= </span>objc_release<span style="color:navy">(</span><span style="color:#8080ff">localFileManager</span><span style="color:navy">);                                                         </span></span>
<span style="background:#f0ffee">  </span><span style="background:navy"></span><span style="background:#f0ffee"><span style="color:navy">}                                                                                                  </span></span>
<span style="background:#f0ffee">  <span style="color:navy">else                                                                                               </span></span>
<span style="background:#f0ffee">  <span style="color:navy">{                                                                                                  </span></span>
<span style="background:#f0ffee">    <span style="color:#8080ff">v12 </span><span style="color:navy">= </span>objc_msgSend<span style="color:navy">(&amp;</span><span style="color:#ff00ff">OBJC_CLASS___NSBundle</span><span style="color:navy">, &quot;</span><span style="color:green">mainBundle&quot;</span><span style="color:navy">);                                        </span></span>
<span style="background:#f0ffee">    <span style="color:#8080ff">v13 </span><span style="color:navy">= (</span><span style="color:gray">void *</span><span style="color:navy">)</span>objc_retainAutoreleasedReturnValue<span style="color:navy">(</span><span style="color:#8080ff">v12</span><span style="color:navy">);                                           </span></span>
<span style="background:#f0ffee">    <span style="color:#8080ff">v14 </span><span style="color:navy">= </span><span style="color:#8080ff">v13</span><span style="color:navy">;                                                                                       </span></span>
<span style="background:#f0ffee">    <span style="color:#8080ff">v15 </span><span style="color:navy">= </span>objc_msgSend<span style="color:navy">(</span><span style="color:#8080ff">v13</span><span style="color:navy">, &quot;</span><span style="color:green">localizedStringForKey:value:table:&quot;</span><span style="color:navy">, </span><span style="color:green">CFSTR(&quot;Ringtone Export Failed&quot;)</span><span style="color:navy">, &amp;</span>stru_10285AB48<span style="color:navy">, 0LL);</span></span>
<span style="background:#f0ffee">    <span style="color:#8080ff">v16 </span><span style="color:navy">= </span>objc_retainAutoreleasedReturnValue<span style="color:navy">(</span><span style="color:#8080ff">v15</span><span style="color:navy">);                                                   </span></span>
<span style="background:#f0ffee">    objc_release<span style="color:navy">(</span><span style="color:#8080ff">v14</span><span style="color:navy">);                                                                               </span></span>
<span style="background:#f0ffee">    <span style="color:#8080ff">v17 </span><span style="color:navy">= </span>objc_msgSend<span style="color:navy">(&amp;</span><span style="color:#ff00ff">OBJC_CLASS___NSBundle</span><span style="color:navy">, &quot;</span><span style="color:green">mainBundle&quot;</span><span style="color:navy">);                                        </span></span>
<span style="background:#f0ffee">    <span style="color:#8080ff">v18 </span><span style="color:navy">= (</span><span style="color:gray">void *</span><span style="color:navy">)</span>objc_retainAutoreleasedReturnValue<span style="color:navy">(</span><span style="color:#8080ff">v17</span><span style="color:navy">);                                           </span></span>
<span style="background:#f0ffee">    <span style="color:#8080ff">v19 </span><span style="color:navy">= </span><span style="color:#8080ff">v18</span><span style="color:navy">;                                                                                       </span></span>
<span style="background:#f0ffee">    <span style="color:#8080ff">v20 </span><span style="color:navy">= </span>objc_msgSend<span style="color:navy">(                                                                              </span></span>
<span style="background:#f0ffee">            <span style="color:#8080ff">v18</span><span style="color:navy">,                                                                                     </span></span>
<span style="background:#f0ffee">            &quot;<span style="color:green">localizedStringForKey:value:table:&quot;</span><span style="color:navy">,                                                    </span></span>
<span style="background:#f0ffee">            <span style="color:green">CFSTR(&quot;The song could not be exported as ringtone&quot;)</span><span style="color:navy">,                                     </span></span>
<span style="background:#f0ffee">            &amp;stru_10285AB48<span style="color:navy">,                                                                         </span></span>
<span style="background:#f0ffee">            <span style="color:navy">0LL);                                                                                    </span></span>
<span style="background:#f0ffee">    <span style="color:#8080ff">v21 </span><span style="color:navy">= </span>objc_retainAutoreleasedReturnValue<span style="color:navy">(</span><span style="color:#8080ff">v20</span><span style="color:navy">);                                                   </span></span>
<span style="background:#f0ffee">    objc_release<span style="color:navy">(</span><span style="color:#8080ff">v19</span><span style="color:navy">);                                                                               </span></span>
<span style="background:#f0ffee">    <span style="color:#8080ff">v22 </span><span style="color:navy">= (</span><span style="color:gray">CbAlert *</span><span style="color:navy">)</span>objc_msgSend<span style="color:navy">(&amp;</span>OBJC_CLASS___CbAlert<span style="color:navy">, &quot;</span><span style="color:green">alloc&quot;</span><span style="color:navy">);                                   </span></span>
<span style="background:#f0ffee">    <span style="color:#8080ff">v23 </span><span style="color:navy">= (</span><span style="color:gray">CbAlert *</span><span style="color:navy">)</span>-[CbAlert initWithTitle:message:]<span style="color:navy">(</span><span style="color:#8080ff">v22</span><span style="color:navy">, &quot;</span><span style="color:green">initWithTitle:message:&quot;</span><span style="color:navy">, </span><span style="color:#8080ff">v16</span><span style="color:navy">, </span><span style="color:#8080ff">v21</span><span style="color:navy">);     </span></span>
<span style="background:#f0ffee">    -[CbAlert show]<span style="color:navy">(</span><span style="color:#8080ff">v23</span><span style="color:navy">, &quot;</span><span style="color:green">show&quot;</span><span style="color:navy">);                                                                    </span></span>
<span style="background:#f0ffee">    <span style="color:#8080ff">v24 </span><span style="color:navy">= *(</span><span style="color:gray">_QWORD *</span><span style="color:navy">)(</span><span style="color:#8080ff">v1 </span><span style="color:navy">+ 48);                                                                      </span></span>
<span style="background:#f0ffee">    <span style="color:#8080ff">v25 </span><span style="color:navy">= *(</span><span style="color:gray">_QWORD *</span><span style="color:navy">)(</span><span style="color:#8080ff">v1 </span><span style="color:navy">+ 40);                                                                      </span></span>
<span style="background:#f0ffee">    <span style="color:#8080ff">v26 </span><span style="color:navy">= &amp;</span>OBJC_CLASS___CbExportRingtone<span style="color:navy">;                                                            </span></span>
<span style="background:#f0ffee">    objc_msgSendSuper2<span style="color:navy">(&amp;</span><span style="color:#8080ff">v25</span><span style="color:navy">, &quot;</span><span style="color:green">songExportDidFinish:&quot;</span><span style="color:navy">, </span><span style="color:#8080ff">v24</span><span style="color:navy">, </span><span style="color:#8080ff">v25</span><span style="color:navy">, &amp;</span>OBJC_CLASS___CbExportRingtone<span style="color:navy">);      </span></span>
<span style="background:#f0ffee">    objc_release<span style="color:navy">(</span><span style="color:#8080ff">v23</span><span style="color:navy">);                                                                               </span></span>
<span style="background:#f0ffee">    objc_release<span style="color:navy">(</span><span style="color:#8080ff">v21</span><span style="color:navy">);                                                                               </span></span>
<span style="background:#f0ffee">    <span style="color:#8080ff">result </span><span style="color:navy">= </span>objc_release<span style="color:navy">(</span><span style="color:#8080ff">v16</span><span style="color:navy">);                                                                      </span></span>
<span style="background:#f0ffee">  </span><span style="background:navy"></span><span style="background:#f0ffee"><span style="color:navy">}                                                                                                  </span></span>
<span style="background:#f0ffee">  <span style="color:navy">return </span><span style="color:#8080ff">result</span><span style="color:navy">;                                                                                     </span></span>
<span style="background:#f0ffee"></span><span style="background:#8080ff"></span><span style="background:#f0ffee"><span style="color:navy">}                                                                                                    </span></span>
</span></body></html>
